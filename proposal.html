<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.540">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Project Title - Group 4 WackyWednesday - Game Metrics: Decoding Premier League Outcomes Through Visual Analysis and Data Exploration</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Project Title</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./proposal.html" aria-current="page"> 
<span class="menu-text">Proposal</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./presentation.html"> 
<span class="menu-text">Presentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/INFO526-DataViz/project-01"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#dataset" id="toc-dataset" class="nav-link active" data-scroll-target="#dataset">Dataset</a></li>
  <li><a href="#questions" id="toc-questions" class="nav-link" data-scroll-target="#questions">Questions</a>
  <ul class="collapse">
  <li><a href="#question-1" id="toc-question-1" class="nav-link" data-scroll-target="#question-1">Question 1</a></li>
  <li><a href="#question-2" id="toc-question-2" class="nav-link" data-scroll-target="#question-2">Question 2</a></li>
  </ul></li>
  <li><a href="#analysis-plan" id="toc-analysis-plan" class="nav-link" data-scroll-target="#analysis-plan">Analysis plan</a>
  <ul class="collapse">
  <li><a href="#timeline-to-completion" id="toc-timeline-to-completion" class="nav-link" data-scroll-target="#timeline-to-completion">Timeline to Completion</a></li>
  <li><a href="#question-1-1" id="toc-question-1-1" class="nav-link" data-scroll-target="#question-1-1">Question 1</a></li>
  <li><a href="#question-2-1" id="toc-question-2-1" class="nav-link" data-scroll-target="#question-2-1">Question 2</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Group 4 WackyWednesday - Game Metrics: Decoding Premier League Outcomes Through Visual Analysis and Data Exploration</h1>
<p class="subtitle lead">Exploring home versus away team dynamics in the world of English football</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="dataset" class="level2">
<h2 class="anchored" data-anchor-id="dataset">Dataset</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>soccer <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-04-04/soccer21-22.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Description of the Dataset</strong></p>
<p>The dataset comes from <a href="https://github.com/rfordatascience/tidytuesday"><code>TidyTuesday</code></a>’s 04 April 2023 post <a href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2023/2023-04-04">“Premier League Match Data 2021-2022”</a>. It is derived from <a href="https://github.com/evangower">Evan Gower</a>’s <a href="https://www.kaggle.com/datasets/evangower/premier-league-match-data">Kaggle post</a> of the same name.</p>
<p>The <a href="https://www.premierleague.com/">Premier League</a> is the foremost league for professional football clubs in England since its creation in 1992. The time period covered in this dataset spans entire 2021 to 2022 Premier League season. The 2021–22 Premier League season marked the 30th anniversary of the league.</p>
<p>Variables in this dataset includes teams, referee, and stats by home and away side such as fouls, shots, cards, and point totals. The dataset is in a tabular format with 380 rows representing individual matches and 22 columns representing each variable, described below. Both categorical and numerical variables are included.</p>
<p>A glimpse at each variable:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 380
Columns: 22
$ Date     &lt;chr&gt; "13/08/2021", "14/08/2021", "14/08/2021", "14/08/2021", "14/0…
$ HomeTeam &lt;chr&gt; "Brentford", "Man United", "Burnley", "Chelsea", "Everton", "…
$ AwayTeam &lt;chr&gt; "Arsenal", "Leeds", "Brighton", "Crystal Palace", "Southampto…
$ FTHG     &lt;dbl&gt; 2, 5, 1, 3, 3, 1, 3, 0, 2, 1, 2, 2, 0, 2, 5, 2, 1, 0, 0, 4, 5…
$ FTAG     &lt;dbl&gt; 0, 1, 2, 0, 1, 0, 2, 3, 4, 0, 0, 0, 0, 2, 0, 0, 1, 1, 2, 1, 0…
$ FTR      &lt;chr&gt; "H", "H", "A", "H", "H", "H", "H", "A", "A", "H", "H", "H", "…
$ HTHG     &lt;dbl&gt; 1, 1, 1, 2, 0, 1, 2, 0, 2, 0, 1, 1, 0, 1, 2, 2, 1, 0, 0, 1, 3…
$ HTAG     &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0, 0…
$ HTR      &lt;chr&gt; "H", "H", "H", "H", "A", "H", "H", "A", "H", "D", "H", "H", "…
$ Referee  &lt;chr&gt; "M Oliver", "P Tierney", "D Coote", "J Moss", "A Madley", "C …
$ HS       &lt;dbl&gt; 8, 16, 14, 13, 14, 9, 13, 14, 17, 13, 27, 10, 7, 17, 16, 13, …
$ AS       &lt;dbl&gt; 22, 10, 14, 4, 6, 17, 11, 19, 8, 18, 9, 9, 14, 17, 1, 10, 15,…
$ HST      &lt;dbl&gt; 3, 8, 3, 6, 6, 5, 7, 3, 3, 3, 9, 2, 2, 4, 4, 3, 3, 6, 3, 7, 1…
$ AST      &lt;dbl&gt; 4, 3, 8, 1, 3, 3, 2, 8, 9, 4, 3, 1, 3, 8, 0, 1, 4, 6, 5, 1, 0…
$ HF       &lt;dbl&gt; 12, 11, 10, 15, 13, 6, 18, 4, 4, 11, 6, 8, 12, 6, 13, 11, 12,…
$ AF       &lt;dbl&gt; 8, 9, 7, 11, 15, 10, 13, 14, 3, 8, 12, 18, 9, 13, 7, 6, 10, 7…
$ HC       &lt;dbl&gt; 2, 5, 7, 5, 6, 5, 2, 3, 7, 3, 8, 3, 3, 8, 6, 7, 7, 5, 9, 10, …
$ AC       &lt;dbl&gt; 5, 4, 6, 2, 8, 4, 4, 11, 6, 11, 4, 4, 5, 5, 1, 2, 7, 4, 8, 0,…
$ HY       &lt;dbl&gt; 0, 1, 2, 0, 2, 1, 3, 1, 1, 2, 0, 3, 3, 2, 1, 4, 2, 1, 3, 0, 1…
$ AY       &lt;dbl&gt; 0, 2, 1, 0, 0, 2, 1, 1, 0, 1, 0, 4, 1, 4, 0, 0, 3, 4, 0, 1, 2…
$ HR       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ AR       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1…</code></pre>
</div>
</div>
<p>The description and type of each variable are as follows:</p>
<ol type="1">
<li><code>Date</code> (character): The date when the match was played.</li>
<li><code>HomeTeam</code> (character): The home team.</li>
<li><code>AwayTeam</code> (character): The away team.</li>
<li><code>FTHG</code> (double): Full-time home goals.</li>
<li><code>FTAG</code> (double): Full-time away goals.</li>
<li><code>FTR</code> (character): Full-time result.</li>
<li><code>HTHG</code> (double): Half-time home goals.</li>
<li><code>HTAG</code> (double): Half-time away goals.</li>
<li><code>HTR</code> (character): Half-time result.</li>
<li><code>Referee</code> (character): Referee of the match.</li>
<li><code>HS</code> (double): Number of shots taken by the home team.</li>
<li><code>AS</code> (double): Number of shots taken by the away team.</li>
<li><code>HST</code> (double): Number of shots on target by the home team.</li>
<li><code>AST</code> (double): Number of shots on target by the away team.</li>
<li><code>HF</code> (double): Number of fouls by the home team.</li>
<li><code>AF</code> (double): Number of fouls by the away team.</li>
<li><code>HC</code> (double): Number of corners taken by the home team.</li>
<li><code>AC</code> (double): Number of corners taken by the away team.</li>
<li><code>HY</code> (double): Number of yellow cards received by the home team.</li>
<li><code>AY</code> (double): Number of yellow cards received by the away team.</li>
<li><code>HR</code> (double): Number of red cards received by the home team.</li>
<li><code>AR</code> (double): Number of red cards received by the away team.</li>
</ol>
<p>Diagnosing the quality of each variable:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22 × 6
   variables types     missing_count missing_percent unique_count unique_rate
   &lt;chr&gt;     &lt;chr&gt;             &lt;int&gt;           &lt;dbl&gt;        &lt;int&gt;       &lt;dbl&gt;
 1 Date      character             0               0          123     0.324  
 2 HomeTeam  character             0               0           20     0.0526 
 3 AwayTeam  character             0               0           20     0.0526 
 4 FTHG      numeric               0               0            8     0.0211 
 5 FTAG      numeric               0               0            7     0.0184 
 6 FTR       character             0               0            3     0.00789
 7 HTHG      numeric               0               0            5     0.0132 
 8 HTAG      numeric               0               0            5     0.0132 
 9 HTR       character             0               0            3     0.00789
10 Referee   character             0               0           22     0.0579 
11 HS        numeric               0               0           29     0.0763 
12 AS        numeric               0               0           29     0.0763 
13 HST       numeric               0               0           14     0.0368 
14 AST       numeric               0               0           15     0.0395 
15 HF        numeric               0               0           20     0.0526 
16 AF        numeric               0               0           22     0.0579 
17 HC        numeric               0               0           16     0.0421 
18 AC        numeric               0               0           14     0.0368 
19 HY        numeric               0               0            7     0.0184 
20 AY        numeric               0               0            6     0.0158 
21 HR        numeric               0               0            3     0.00789
22 AR        numeric               0               0            2     0.00526</code></pre>
</div>
</div>
<p>This dataset is ideal for analytical projects aiming to understand football dynamics, player contributions, and team strategies throughout the season.</p>
<p><strong>Reason for Choosing this Dataset</strong></p>
<p>We chose this data set because it provides comprehensive statistics contributing to the outcome of football matches. Therefore, we can explore the interesting topic of the potential existence of bias against away teams in the English Premier League. The availability of data allows us to use variables such as shots on goal or create new variables such as calculating the ratio of yellow cards to fouls to answer this question of bias. Some members of the group are also quite passionate about soccer, which definitely convinced us to use this data set!</p>
</section>
<section id="questions" class="level2">
<h2 class="anchored" data-anchor-id="questions">Questions</h2>
<section id="question-1" class="level3">
<h3 class="anchored" data-anchor-id="question-1">Question 1</h3>
<p>What effect (if any) does being the “home” team versus being the “away” team affect the teams’ performances?</p>
<ol type="a">
<li>Do the number of goals at half-time determine the final outcome?</li>
<li>Does home-team advantage play a major role in the final match outcome?</li>
</ol>
<p>Our hypothesis is that the home team will have 1) more goals at both half-time and full-time, and 2) more wins due to “home team advantage”, where it is thought that the hosting team has a significant advantage over the visiting team. The home team and away team advantage will also be analyzed using the full-time results as well as goals. We also predict that the team ahead at half-time will win at full-time.</p>
</section>
<section id="question-2" class="level3">
<h3 class="anchored" data-anchor-id="question-2">Question 2</h3>
<p>What effect (if any) does being the “home” team versus being the “away” team affect the teams’ penalties?</p>
<ol type="a">
<li>Is there a noticeable bias against the away team in terms of the number of fouls, red cards, and yellow cards received?</li>
<li>How do the ratios of cards to fouls differ between home and away teams?</li>
</ol>
<p>Although referees are supposed to be unbiased, we predict the number of fouls and cards against the home team will be less. Additionally, we predict that the home team will typically have a lower card to foul ratio than the away team (that is, will receive fewer cards per foul in a game).</p>
</section>
</section>
<section id="analysis-plan" class="level2">
<h2 class="anchored" data-anchor-id="analysis-plan">Analysis plan</h2>
<section id="timeline-to-completion" class="level3">
<h3 class="anchored" data-anchor-id="timeline-to-completion">Timeline to Completion</h3>
<ul>
<li>Week of <strong>05 Feb</strong>
<ul>
<li>Have proposal prepared for peer review</li>
<li>Provide peer review for other groups</li>
</ul></li>
<li>Week of <strong>12 Feb</strong>
<ul>
<li>Make changes to proposal based on peer review</li>
<li>Make changes to proposal based on instructor review</li>
</ul></li>
<li>Week of <strong>19 Feb</strong>
<ul>
<li>Determine work division</li>
<li>Do individual exploration of the data and start first drafts of visualizations to compare with other group members</li>
<li>Start slidedeck formatting</li>
</ul></li>
<li>Week of <strong>26 Feb</strong>
<ul>
<li>Finalize visualizations, making them presentation-ready</li>
<li>Complete writeups</li>
<li>Website cleanup</li>
<li>Presentation slidedeck finalization</li>
<li>Presentation practice</li>
</ul></li>
</ul>
</section>
<section id="question-1-1" class="level3">
<h3 class="anchored" data-anchor-id="question-1-1">Question 1</h3>
<p>Members: Sai Navya Reddy, Akash Srinivasan, Sanja Dmitrovic</p>
<ul>
<li>Variables involved:
<ul>
<li>The name of the teams: <code>HomeTeam</code> (the home team) and <code>AwayTeam</code> (the away team)</li>
<li>Game winner: <code>FTR</code> (Full time result)</li>
<li>Ahead at half time: <code>HTR</code> (Half Time Results)</li>
<li>Full time goals: <code>FTHG</code> (Full time home goals) and <code>FTAG</code> (full time away goals)</li>
<li>Halftime goals for the home team: <code>HTHG</code> Halftime home goals</li>
<li>Halftime goals for the away team: <code>HTAG</code> Halftime away goals</li>
</ul></li>
<li>This question is not likely to require additional variable creation.</li>
<li>This question is not likely to require external data to be merged in.</li>
<li>Plot suggestions:
<ul>
<li>Violin plots to show the distribution of foul cards for both the home and away teams (This is important to reveal any form of bias that maybe exist for either teams)</li>
<li>Scatter plot to show the relationship between half time goals and full time goals (if positive, the probability of winning is higher if a team leads in half time).</li>
</ul></li>
</ul>
</section>
<section id="question-2-1" class="level3">
<h3 class="anchored" data-anchor-id="question-2-1">Question 2</h3>
<p>Members: Valerie Okine, Jiayue He, Gillian McGinnis</p>
<ul>
<li>Variables involved:
<ul>
<li>Fouls: <code>HF</code> (Home Fouls) and <code>AF</code> (Away Fouls).</li>
<li>Cards: <code>HY</code> (Home Yellow) , <code>AY</code> (Away Yellow), <code>HR</code> (Home Red), and <code>AR</code> (Away Red).</li>
</ul></li>
<li>Variables to be created:
<ul>
<li>Ratios between the total number of yellow cards and red cards to fouls, by team and game.</li>
<li>Ratio of total number of cards and number of fouls, by team and game.</li>
</ul></li>
<li>This question is not likely to require external data to be merged in.</li>
<li>Plot suggestions:
<ul>
<li>Bar charts to show the frequency of the foul cards for both the home and away teams.</li>
<li>Frequency polygon to show the distribution of cards (either yellow or red) for both away and home teams.</li>
</ul></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>